<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        div {
            margin: 10px 0;
        }

        .bixbox {
            border: 1px solid black;
            padding: 5px;
        }
    </style>
</head>
<body>
<div class="bixbox records">
    <div class="record">
        <span>LoadRecord :</span>
        <button class="copy">记录</button>
    </div>

    <div class="all">
        <span>LoadRecordAllNumbers :</span>
        <button class="click">查询</button>
    </div>

    <div class="page">
        <span>from</span>
        <input type="number" class="from" value="0"/>
        <span>to</span>
        <input type="number" class="to" value="10"/>
        <button class="get_one_page">获取一页</button>
    </div>
</div>

<div class="bixbox clicks">
    <div class="record">
        <span>ClickRecord :</span>
        <button class="copy">记录</button>
    </div>

    <div class="all">
        <span>ClickRecordAllNumbers :</span>
        <button class="click">查询</button>
    </div>

    <div class="page">
        <span>from</span>
        <input type="number" class="from" value="0"/>
        <span>to</span>
        <input type="number" class="to" value="10"/>
        <button class="get_one_page">获取一页</button>
    </div>
</div>

<div class="bixbox copys">
    <div class="record">
        <span>CopyRecord :</span>
        <button class="copy">记录</button>
    </div>

    <div class="all">
        <span>CopyRecordAllNumbers :</span>
        <button class="click">查询</button>
    </div>

    <div class="page">
        <span>from</span>
        <input type="number" class="from" value="0"/>
        <span>to</span>
        <input type="number" class="to" value="10"/>
        <button class="get_one_page">获取一页</button>
    </div>
</div>

</body>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
<script src="/public/javascripts/getDevice.js"></script>
<script>


  $(function () {

    var title = document.querySelector('title').innerHTML;
    var device = compatibility();
    var team = 'test';

    $('.bixbox').each((index, box) => {

      var route = box.className.split(' ').pop();

      var record = $(box).find('.record');
      var all = $(box).find('.all');
      var page = $(box).find('.page');

      /*record记录*/
      record.on('click', () => {
        var data;

        switch (route) {
          case 'records':
            data = {
              record_title: title,
              record_device: device,
              record_team: team
            }
            break;
          case 'clicks':
            data = {
              click_title: title,
              click_device: device,
              click_team: team,
              click_btn: 'test'
            }
            break;
          case 'copys':
            data = {
              copy_title: title,
              copy_device: device,
              copy_team: team,
              copy_text: 'test'
            }
            break;
        }

        let url = `/${route}/add`

        fetch(url, {
          method: 'post',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
          .then(res => res.json())
          .then(json => {
            console.log(json)
          })
      });
      /*all记录*/
      all.on('click', () => {
        let url = `/admin/${route}/total`
        let data;

        // switch (route) {
        //   case 'records':
        //     data = {
        //       record_title: title,
        //       record_device: device,
        //       record_team: team
        //     }
        //     break;
        //   case 'clicks':
        //     data = {
        //       click_title: title,
        //       click_device: device,
        //       click_team: team,
        //       click_btn: 'test'
        //     }
        //     break;
        //   case 'copys':
        //     data = {
        //       copy_title: title,
        //       copy_device: device,
        //       copy_team: team,
        //       copy_text: 'test'
        //     }
        //     break;
        // }

        fetch(url, {
          method: 'post',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
          .then(res => res.json())
          .then(json => {
            console.log(json)
          })
      });
      /*page记录*/
      page.on('click', () => {
        let url = `/${route}/page`;

        let fromIndex = page.find('.from').val();
        let toIndex = page.find('.to').val();
        let data = {
          from: fromIndex,
          to: toIndex
        };

        fetch(url, {
          method: 'post',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
          .then(res => res.json())
          .then(json => {
            console.log(json)
          })
      })

    })
  })
</script>
</html>
